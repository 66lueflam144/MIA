
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Java_path | 66+144</title>
    <meta name="author" content="LUEFLAM" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="icon" href="/MIA/images/bloodykitty.jpg" />
    <link rel="preconnect" href="https://cdn.staticfile.org" />
<script src="https://cdn.staticfile.org/vue/3.3.4/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css" />
<link rel="preconnect" href="https://fonts.loli.net" />
<link rel="preconnect" href="https://gstatic.loli.net" crossorigin />
<link rel="stylesheet" href="https://fonts.loli.net/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap" />
<script> const mixins = {}; </script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://cdn.staticfile.org/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/github.min.css"
/>
<script src="/MIA/js/lib/highlight.js"></script>



<script src="/MIA/js/lib/preview.js"></script>









<link rel="stylesheet" href="/MIA/css/main.css" />

<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/MIA/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/MIA/">
            <span>66+144</span>
        </a>
        
        <a href="/MIA/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/MIA/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/MIA/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/MIA/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/MIA/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;66+144</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/MIA/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/MIA/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/MIA/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/MIA/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/MIA/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>Java_path</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/11/13
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/MIA/tags/LEARN/" style="color: #03a9f4">LEARN</a>
            </span>
            
            <span class="tag">
                
                <a href="/MIA/tags/JAVA/" style="color: #ff7d73">JAVA</a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        <p>最近在随机学学，然后感觉这个挺有趣的就学着写写。</p>
<span id="more"></span>

<h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><blockquote>
<p>运行在web服务器上或应用服务器上的程序，作为来自Web浏览器或者其他HTTP客户端的请求和HTTP服务器上的数据库或应用程序之间的中间层。</p>
<blockquote>
<p>从代码上来说，Servlet属于Java类，服务于HTTP请求并实现了javax.servlet.Servlet接口。</p>
</blockquote>
</blockquote>
<p>一个Servlet生命周期：</p>
<ul>
<li>init()</li>
<li>service() ：服务阶段，主要处理来自客户端的请求，并可以根据HTTP请求类型来调用对应的方法，比如下面的两个</li>
<li>doGet()，doPost() ：处理阶段，将主要代码逻辑写在这里，根据不同请求对应不同方法。</li>
<li>destroy()</li>
</ul>
<h1 id="First-Servlet"><a href="#First-Servlet" class="headerlink" title="First Servlet"></a>First Servlet</h1><p>创建第一个Servlet  by maven.</p>
<h2 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h2><p>IDEA建议找2022的，因为有破解版。（就是这么朴实无华且穷的建议）<br>用IDEA的Maven archetype来创建。<br><img src="https://github.com/66lueflam144/MIA/blob/gh-pages/imgs/Maven%20start.png"></p>
<p>如图所示：</p>
<ul>
<li><p>name什么的自己随心情写。</p>
</li>
<li><p>JDK建议1.8或者16（反正找点能跑的，不然就会和我一样为JDK19换来一句“Java 错误：不支持发行版本 5”）（JDK 8 好像也要自己找。）</p>
</li>
<li><p>Archetype选 webapp</p>
</li>
<li><p>version是自动的，不用管。</p>
</li>
</ul>
<p>其他的默认，create就行。</p>
<h2 id="Setting"><a href="#Setting" class="headerlink" title="Setting"></a>Setting</h2><p>create之后稍微等一下它初始化，然后就可以看到项目文件夹下有<code>.idea</code>，<code>src</code>等文件夹以及文件。<br>在<code>src/main</code>目录下创建new Directory，命名一下。（我直接写java）<br>然后在<code>java</code>里面创建class，（mine：FirstServlet）对其进行编写：</p>
<pre><code class="java">import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpServlet;
import java.io.IOException;
import java.io.PrintWriter;

public class FirstServlet extends HttpServlet&#123;
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;

        resp.setContentType(&quot;text/html&quot;);

        PrintWriter out = resp.getWriter();
        out.print(&quot;&lt;h1&gt;blue blood.&lt;/h1&gt;&quot;);//记住这个，成功创建界面应该是看见这行字。内容可以自己写。
    &#125;
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
        doGet(req, resp);
    &#125;
&#125;
</code></pre>
<p>目录里面有个<code>pom.xml</code>，打开并添加配置：</p>
<pre><code class="java">&lt;dependency&gt;
      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
      &lt;version&gt;3.1.0&lt;/version&gt;
      &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;
</code></pre>
<h2 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h2><p>如果没下载请去<a href=https://tomcat.apache.org/download-80.cgi>下载</a><br>版本随意，但选择<code>core</code>下的。</p>
<p>对tomcat进行配置：<br>在IDEA界面右上角那个绿色锤子和绿色三角形之间，一个<code>current file</code>，点击之后会有一个<code>edit configurations</code>,点进去，add new，下拉选择Tomcat Local。</p>
<ul>
<li><p>Deployment界面点击右下角fix，二选一建议二。</p>
</li>
<li><p>回到Server界面可以看到URL跟着变了。</p>
</li>
<li><p>Apply then ok</p>
</li>
</ul>
<p>就会看到<br><img src="https://github.com/66lueflam144/MIA/blob/gh-pages/imgs/tomcat.png"></p>
<p>我这个是运行过的所以有个Finished。<br>到这里已经成功80%。</p>
<p>接下来是对来自于根目录下方<code>webapp/WEB-INF</code>的<code>web.xml</code>的配置，把servlet写进去，进行注册：</p>
<pre><code class="java">&lt;servlet&gt;
    &lt;servlet-name&gt;FirstServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;FirstServlet&lt;/servlet-class&gt;
  &lt;/servlet&gt;
  
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;FirstServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/FirstServlet&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
</code></pre>
<blockquote>
<p>映射匹配流程：&#x2F;FirstServlet路径绑定的servlet-name为FirstServlet，而FirstServlet绑定的class是FirstServlet，最终访问&#x2F;FirstServlet，调用类也是FirstServlet.class</p>
</blockquote>
<p>对于以上解释，需要注意的是：</p>
<ul>
<li>这个类也就是class，名字是自己写的</li>
<li>url-pattern这里可以填其他的，感觉看的这个博客的作者是故意想绕死初学者。才一堆重名。当然也可能是ctrl c + ctrl v比较方便。</li>
</ul>
<h2 id="start"><a href="#start" class="headerlink" title="start"></a>start</h2><p>如果到这里，直接启动是可以的，不过你看到的界面是那个<code>index.jsp</code>的内容——一个<code>Hello World</code>。按理说，我们应该看见<code>blue blood</code>才对。</p>
<p>这是因为在tomcat的配置中，那个URL是访问默认页面的，在这里就是<code>index.jsp</code>。<br>修改的方法有两种（但本质是一种）：</p>
<ul>
<li><p>1.可以在当前运行的local page上添加刚才写的url-pattern的内容。我这里就是<code>http://localhost:8080/ServletDemo2_war/FirstServlet</code></p>
</li>
<li><p>2.右击左下角的你的tomcat选择<code>edit configuration</code>，在URL处修改成<code>http://localhost:8080/ServletDemo2_war/FirstServlet</code>就行了。记得apply再ok，重启服务即可。</p>
</li>
</ul>
<h1 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h1><blockquote>
<p>Servlet中的过滤器，主要用于过滤字符编码，防止XSS，SQL injection，file upload等。</p>
<blockquote>
<p>配置其即可获得统一过滤危险字符，比自己去写白名单、黑名单方便很多。</p>
</blockquote>
</blockquote>
<h2 id="又来创建了"><a href="#又来创建了" class="headerlink" title="又来创建了"></a>又来创建了</h2><p>过滤器基于<code>javax.servlet.Filter</code>接口进行实现的，需要使用<code>doFilter()</code>方法实现拦截。</p>
<h3 id="编写"><a href="#编写" class="headerlink" title="编写"></a>编写</h3><p>以servlet为基础进行编写：</p>
<ul>
<li><code>main/java/</code>中new package，创建个新filter，再建个new class <code>FilterTest</code>。（这里有趣的是，我最开始没注意到是要建一个filter，直接建了一个<code>com.test.filter</code>package，在里面建了一个类，但是也成功了。）</li>
</ul>
<p>对类进行编写：</p>
<pre><code class="java">package com.test.filter;

import javax.servlet.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class FilterTest implements Filter &#123;
    @Override
    public void destroy()&#123;
    &#125;

    @Override
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws ServletException, IOException &#123;
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) resp;

        String requestURI = request.getRequestURI();

        if (requestURI.contains(&quot;/FirstServlet&quot;))&#123;
            chain.doFilter(request, response);
        &#125; else &#123;
            request.getRequestDispatcher(&quot;/&quot;).forward(request, response);
        &#125;
    &#125;

    @Override
    public void init(FilterConfig config) throws ServletException &#123;
    &#125;
&#125;
</code></pre>
<blockquote>
<p>重写了doFilter()方法</p>
</blockquote>
<ul>
<li>通过<code>String requestURI = request.getRequestURI();</code>获取URL路径，然后进行判断</li>
<li>如果路径中包含<code>/FirstServlet</code>，就放行，否则转到根目录下。</li>
</ul>
<h3 id="最后注册"><a href="#最后注册" class="headerlink" title="最后注册"></a>最后注册</h3><p>也是在<code>pom.xml</code>里面写入：</p>
<pre><code class="java">&lt;filter&gt;
    &lt;filter-name&gt;FilterTest&lt;/filter-name&gt;
    &lt;filter-class&gt;com.test.filter.FilterTest&lt;/filter-class&gt;
  &lt;/filter&gt;

  &lt;filter-mapping&gt;
    &lt;filter-name&gt;FilterTest&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt; 
</code></pre>
<p>过滤器标签需要在Servlet标签之上。程序会按照注册顺序进行执行。</p>
<p>然后你再次启动，当你把<code>http://localhost:8080/ServletDemo2_war/FirstServlet</code>改成<code>http://localhost:8080/ServletDemo2_war/Fi</code>或者<code>http://localhost:8080/ServletDemo2_war/hello</code>，都会回到<code>index.jsp</code>的</p>
<h1>Hello World</h1>
    </div>
    
    
    
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2023 66+144
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;LUEFLAM
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/MIA/js/main.js"></script>
    
    




    
</body>
</html>
